{"html":"<article><div class=\"content-top\"><\/div><div class=\"textblock\"><h1>L2CAP Connection Oriented Channels<span id=\"l2-cap-connection-oriented-channels\" class=\"self-anchor\"><a class=\"perm\" href=\"#l2-cap-connection-oriented-channels\">#<\/a><\/span><\/h1><p style=\"color:inherit\">L2CAP Connection Oriented Channels. <\/p><p style=\"color:inherit\">The commands and events in this class provide Logical Link Control and Adaptation Protocol (L2CAP) credit-based logical channels.<\/p><p style=\"color:inherit\">An L2CAP credit-based logical channel is a logical link identified by a channel identifier in the assigned name space 0x40-0x7F for LE-U logical links (the <code>cid<\/code> parameter in the commands and events of this API class). These channels use a credit-based flow control mechanism. The credit can be configured at the channel opening and later dynamically updated on the channel.<\/p><p style=\"color:inherit\">The Simplified Protocol/Service Multiplexer (SPSM) of a channel specifies the protocol or services the channel implements. It can be a value for a fixed service assigned by the Bluetooth SIG or a dynamically-allocated value and used with services defined in the GATT Server. The dynamically-assigned value may be used to support multiple implementations of a particular protocol. See the Bluetooth core specification for more details. The application specifies the SPSM value in a channel open request in the <code>spsm<\/code> parameter of the <a href=\"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-l2cap#sl-bt-l2cap-open-le-channel\" target=\"_blank\" rel=\"\">sl_bt_l2cap_open_le_channel<\/a> command.<\/p><p style=\"color:inherit\">Each of the local and peer channel endpoints must specify the maximum Service Data Unit (SDU) size (the 'MTU' field of the L2CAP packets in the Bluetooth Core specification) that it can receive on the channel. The application specifies the maximum Service Data Unit size (the <code>max_sdu<\/code> parameter in commands and events) of the local channel endpoint.<\/p><p style=\"color:inherit\">Each channel endpoint has a maximum PDU payload Size that the L2CAP layer can receive in a single data packet on the channel. The maximum PDU payload size supported by the stack for local channel endpoints is 252 bytes, which is the maximum data length the <a href=\"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-evt-l2cap-channel-data\" target=\"_blank\" rel=\"\">sl_bt_evt_l2cap_channel_data<\/a> event can support. The application specifies the max PDU payload size (the <code>max_pdu<\/code> parameter in commands and events). Additionally, the application is responsible for handling the segmentation from SDU to PDU and reassembly from PDU to SDU. <\/p><h2>Modules<span id=\"modules\" class=\"self-anchor\"><a class=\"perm\" href=\"#modules\">#<\/a><\/span><\/h2><p style=\"color:inherit\"><a href=\"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-evt-l2cap-le-channel-open-request\" target=\"_blank\" rel=\"\">sl_bt_evt_l2cap_le_channel_open_request<\/a><\/p><p style=\"color:inherit\"><a href=\"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-evt-l2cap-le-channel-open-response\" target=\"_blank\" rel=\"\">sl_bt_evt_l2cap_le_channel_open_response<\/a><\/p><p style=\"color:inherit\"><a href=\"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-evt-l2cap-channel-data\" target=\"_blank\" rel=\"\">sl_bt_evt_l2cap_channel_data<\/a><\/p><p style=\"color:inherit\"><a href=\"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-evt-l2cap-channel-credit\" target=\"_blank\" rel=\"\">sl_bt_evt_l2cap_channel_credit<\/a><\/p><p style=\"color:inherit\"><a href=\"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-evt-l2cap-channel-closed\" target=\"_blank\" rel=\"\">sl_bt_evt_l2cap_channel_closed<\/a><\/p><p style=\"color:inherit\"><a href=\"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-evt-l2cap-command-rejected\" target=\"_blank\" rel=\"\">sl_bt_evt_l2cap_command_rejected<\/a><\/p><div class=\"decl-class-section\"><h2>Enumerations<span id=\"enum-declaration\" class=\"self-anchor\"><a class=\"perm\" href=\"#enum-declaration\">#<\/a><\/span><\/h2><div><div class=\"columns\"><div class=\"attributename has-text-right\">enum<\/div><div class=\"column\"><div class=\"attributename\"><a href=\"#sl-bt-l2cap-connection-result-t\">sl_bt_l2cap_connection_result_t<\/a> {<\/div><div class=\"enum\">sl_bt_l2cap_connection_result_successful = 0x0<\/div><div class=\"enum\">sl_bt_l2cap_connection_result_spsm_not_supported = 0x2<\/div><div class=\"enum\">sl_bt_l2cap_connection_result_no_resources_available = 0x4<\/div><div class=\"enum\">sl_bt_l2cap_connection_result_insufficient_authentication = 0x5<\/div><div class=\"enum\">sl_bt_l2cap_connection_result_insufficient_authorization = 0x6<\/div><div class=\"enum\">sl_bt_l2cap_connection_result_encryption_key_size_too_short = 0x7<\/div><div class=\"enum\">sl_bt_l2cap_connection_result_insufficient_encryption = 0x8<\/div><div class=\"enum\">sl_bt_l2cap_connection_result_invalid_source_cid = 0x9<\/div><div class=\"enum\">sl_bt_l2cap_connection_result_source_cid_already_allocated = 0xa<\/div><div class=\"enum\">sl_bt_l2cap_connection_result_unacceptable_parameters = 0xb<\/div><div class=\"attributename\">}<\/div><div class=\"classdescription\"><p style=\"color:inherit\">Defines possible result values in the responses to credit based channel connection requests. <\/p><\/div><\/div><\/div><\/div><div><div class=\"columns\"><div class=\"attributename has-text-right\">enum<\/div><div class=\"column\"><div class=\"attributename\"><a href=\"#sl-bt-l2cap-command-reject-reason-t\">sl_bt_l2cap_command_reject_reason_t<\/a> {<\/div><div class=\"enum\">sl_bt_l2cap_command_not_understood = 0x0<\/div><div class=\"enum\">sl_bt_l2cap_signaling_mtu_exceeded = 0x1<\/div><div class=\"enum\">sl_bt_l2cap_invalid_cid_request = 0x2<\/div><div class=\"attributename\">}<\/div><div class=\"classdescription\"><p style=\"color:inherit\">Describes why a request command was rejected. <\/p><\/div><\/div><\/div><\/div><div><div class=\"columns\"><div class=\"attributename has-text-right\">enum<\/div><div class=\"column\"><div class=\"attributename\"><a href=\"#sl-bt-l2cap-command-code-t\">sl_bt_l2cap_command_code_t<\/a> {<\/div><div class=\"enum\">sl_bt_l2cap_disconnection_request = 0x6<\/div><div class=\"enum\">sl_bt_l2cap_le_connection_request = 0x14<\/div><div class=\"enum\">sl_bt_l2cap_flow_control_credit = 0x16<\/div><div class=\"attributename\">}<\/div><div class=\"classdescription\"><p style=\"color:inherit\">Describes which of the request commands has been rejected. <\/p><\/div><\/div><\/div><\/div><\/div><div class=\"decl-class-section\"><h2>Functions<span id=\"func-declaration\" class=\"self-anchor\"><a class=\"perm\" href=\"#func-declaration\">#<\/a><\/span><\/h2><div><div class=\"columns\"><div class=\"attributename has-text-right\">sl_status_t<\/div><div class=\"column\"><div class=\"attributename\"><a href=\"#sl-bt-l2cap-open-le-channel\">sl_bt_l2cap_open_le_channel<\/a>(uint8_t connection, uint16_t spsm, uint16_t max_sdu, uint16_t max_pdu, uint16_t credit, uint16_t *cid)<\/div><div class=\"classdescription\"><\/div><\/div><\/div><\/div><div><div class=\"columns\"><div class=\"attributename has-text-right\">sl_status_t<\/div><div class=\"column\"><div class=\"attributename\"><a href=\"#sl-bt-l2cap-send-le-channel-open-response\">sl_bt_l2cap_send_le_channel_open_response<\/a>(uint8_t connection, uint16_t cid, uint16_t max_sdu, uint16_t max_pdu, uint16_t credit, uint16_t errorcode)<\/div><div class=\"classdescription\"><\/div><\/div><\/div><\/div><div><div class=\"columns\"><div class=\"attributename has-text-right\">sl_status_t<\/div><div class=\"column\"><div class=\"attributename\"><a href=\"#sl-bt-l2cap-channel-send-data\">sl_bt_l2cap_channel_send_data<\/a>(uint8_t connection, uint16_t cid, size_t data_len, const uint8_t *data)<\/div><div class=\"classdescription\"><\/div><\/div><\/div><\/div><div><div class=\"columns\"><div class=\"attributename has-text-right\">sl_status_t<\/div><div class=\"column\"><div class=\"attributename\"><a href=\"#sl-bt-l2cap-channel-send-credit\">sl_bt_l2cap_channel_send_credit<\/a>(uint8_t connection, uint16_t cid, uint16_t credit)<\/div><div class=\"classdescription\"><\/div><\/div><\/div><\/div><div><div class=\"columns\"><div class=\"attributename has-text-right\">sl_status_t<\/div><div class=\"column\"><div class=\"attributename\"><a href=\"#sl-bt-l2cap-close-channel\">sl_bt_l2cap_close_channel<\/a>(uint8_t connection, uint16_t cid)<\/div><div class=\"classdescription\"><\/div><\/div><\/div><\/div><\/div><div class=\"decl-class-section\"><h2>Macros<span id=\"define-declaration\" class=\"self-anchor\"><a class=\"perm\" href=\"#define-declaration\">#<\/a><\/span><\/h2><div><div class=\"columns\"><div class=\"attributename has-text-right\">#define<\/div><div class=\"column\"><div class=\"attributename\"><a href=\"#sl-bt-cmd-l2cap-open-le-channel-id\">sl_bt_cmd_l2cap_open_le_channel_id<\/a> 0x01430020<\/div><div class=\"classdescription\"><\/div><\/div><\/div><\/div><div><div class=\"columns\"><div class=\"attributename has-text-right\">#define<\/div><div class=\"column\"><div class=\"attributename\"><a href=\"#sl-bt-cmd-l2cap-send-le-channel-open-response-id\">sl_bt_cmd_l2cap_send_le_channel_open_response_id<\/a> 0x02430020<\/div><div class=\"classdescription\"><\/div><\/div><\/div><\/div><div><div class=\"columns\"><div class=\"attributename has-text-right\">#define<\/div><div class=\"column\"><div class=\"attributename\"><a href=\"#sl-bt-cmd-l2cap-channel-send-data-id\">sl_bt_cmd_l2cap_channel_send_data_id<\/a> 0x03430020<\/div><div class=\"classdescription\"><\/div><\/div><\/div><\/div><div><div class=\"columns\"><div class=\"attributename has-text-right\">#define<\/div><div class=\"column\"><div class=\"attributename\"><a href=\"#sl-bt-cmd-l2cap-channel-send-credit-id\">sl_bt_cmd_l2cap_channel_send_credit_id<\/a> 0x04430020<\/div><div class=\"classdescription\"><\/div><\/div><\/div><\/div><div><div class=\"columns\"><div class=\"attributename has-text-right\">#define<\/div><div class=\"column\"><div class=\"attributename\"><a href=\"#sl-bt-cmd-l2cap-close-channel-id\">sl_bt_cmd_l2cap_close_channel_id<\/a> 0x05430020<\/div><div class=\"classdescription\"><\/div><\/div><\/div><\/div><div><div class=\"columns\"><div class=\"attributename has-text-right\">#define<\/div><div class=\"column\"><div class=\"attributename\"><a href=\"#sl-bt-rsp-l2cap-open-le-channel-id\">sl_bt_rsp_l2cap_open_le_channel_id<\/a> 0x01430020<\/div><div class=\"classdescription\"><\/div><\/div><\/div><\/div><div><div class=\"columns\"><div class=\"attributename has-text-right\">#define<\/div><div class=\"column\"><div class=\"attributename\"><a href=\"#sl-bt-rsp-l2cap-send-le-channel-open-response-id\">sl_bt_rsp_l2cap_send_le_channel_open_response_id<\/a> 0x02430020<\/div><div class=\"classdescription\"><\/div><\/div><\/div><\/div><div><div class=\"columns\"><div class=\"attributename has-text-right\">#define<\/div><div class=\"column\"><div class=\"attributename\"><a href=\"#sl-bt-rsp-l2cap-channel-send-data-id\">sl_bt_rsp_l2cap_channel_send_data_id<\/a> 0x03430020<\/div><div class=\"classdescription\"><\/div><\/div><\/div><\/div><div><div class=\"columns\"><div class=\"attributename has-text-right\">#define<\/div><div class=\"column\"><div class=\"attributename\"><a href=\"#sl-bt-rsp-l2cap-channel-send-credit-id\">sl_bt_rsp_l2cap_channel_send_credit_id<\/a> 0x04430020<\/div><div class=\"classdescription\"><\/div><\/div><\/div><\/div><div><div class=\"columns\"><div class=\"attributename has-text-right\">#define<\/div><div class=\"column\"><div class=\"attributename\"><a href=\"#sl-bt-rsp-l2cap-close-channel-id\">sl_bt_rsp_l2cap_close_channel_id<\/a> 0x05430020<\/div><div class=\"classdescription\"><\/div><\/div><\/div><\/div><\/div><div class=\"def-class-section\"><h2>Enumeration Documentation<span id=\"enum-definition\" class=\"self-anchor\"><a class=\"perm\" href=\"#enum-definition\">#<\/a><\/span><\/h2><div><h3>sl_bt_l2cap_connection_result_t<span id=\"sl-bt-l2cap-connection-result-t\" class=\"self-anchor\"><a class=\"perm\" href=\"#sl-bt-l2cap-connection-result-t\">#<\/a><\/span><\/h3><blockquote>sl_bt_l2cap_connection_result_t<\/blockquote><p style=\"color:inherit\">Defines possible result values in the responses to credit based channel connection requests. <\/p><table><tbody><tr><th colspan=\"2\">Enumerator<\/th><\/tr><tr><td class=\"fieldname\">sl_bt_l2cap_connection_result_successful<\/td><td class=\"fielddescription\"><p style=\"color:inherit\">(0x0) Connection successful <\/p><\/td><\/tr><tr><td class=\"fieldname\">sl_bt_l2cap_connection_result_spsm_not_supported<\/td><td class=\"fielddescription\"><p style=\"color:inherit\">(0x2) Connection refused - SPSM not supported <\/p><\/td><\/tr><tr><td class=\"fieldname\">sl_bt_l2cap_connection_result_no_resources_available<\/td><td class=\"fielddescription\"><p style=\"color:inherit\">(0x4) Connection refused - no resources available <\/p><\/td><\/tr><tr><td class=\"fieldname\">sl_bt_l2cap_connection_result_insufficient_authentication<\/td><td class=\"fielddescription\"><p style=\"color:inherit\">(0x5) Connection refused - insufficient authentication <\/p><\/td><\/tr><tr><td class=\"fieldname\">sl_bt_l2cap_connection_result_insufficient_authorization<\/td><td class=\"fielddescription\"><p style=\"color:inherit\">(0x6) Connection refused - insufficient authorization <\/p><\/td><\/tr><tr><td class=\"fieldname\">sl_bt_l2cap_connection_result_encryption_key_size_too_short<\/td><td class=\"fielddescription\"><p style=\"color:inherit\">(0x7) Connection refused - encryption key size too short <\/p><\/td><\/tr><tr><td class=\"fieldname\">sl_bt_l2cap_connection_result_insufficient_encryption<\/td><td class=\"fielddescription\"><p style=\"color:inherit\">(0x8) Connection refused - insufficient encryption <\/p><\/td><\/tr><tr><td class=\"fieldname\">sl_bt_l2cap_connection_result_invalid_source_cid<\/td><td class=\"fielddescription\"><p style=\"color:inherit\">(0x9) Connection refused - invalid Source CID <\/p><\/td><\/tr><tr><td class=\"fieldname\">sl_bt_l2cap_connection_result_source_cid_already_allocated<\/td><td class=\"fielddescription\"><p style=\"color:inherit\">(0xa) Connection refused - Source CID already allocated <\/p><\/td><\/tr><tr><td class=\"fieldname\">sl_bt_l2cap_connection_result_unacceptable_parameters<\/td><td class=\"fielddescription\"><p style=\"color:inherit\">(0xb) Connection refused - unacceptable parameters <\/p><\/td><\/tr><\/tbody><\/table><br><div>Definition at line <code>14003<\/code> of file <code>/mnt/raid/workspaces/ws.cynwT2I6w/overlay/gsdk/protocol/bluetooth/build/native/ble_host/ble_bgapi/inc/sl_bt_api.h<\/code><\/div><br><\/div><div><h3>sl_bt_l2cap_command_reject_reason_t<span id=\"sl-bt-l2cap-command-reject-reason-t\" class=\"self-anchor\"><a class=\"perm\" href=\"#sl-bt-l2cap-command-reject-reason-t\">#<\/a><\/span><\/h3><blockquote>sl_bt_l2cap_command_reject_reason_t<\/blockquote><p style=\"color:inherit\">Describes why a request command was rejected. <\/p><table><tbody><tr><th colspan=\"2\">Enumerator<\/th><\/tr><tr><td class=\"fieldname\">sl_bt_l2cap_command_not_understood<\/td><td class=\"fielddescription\"><p style=\"color:inherit\">(0x0) Command not understood e.g., unknown command code <\/p><\/td><\/tr><tr><td class=\"fieldname\">sl_bt_l2cap_signaling_mtu_exceeded<\/td><td class=\"fielddescription\"><p style=\"color:inherit\">(0x1) Command size has exceeded the signaling MTU size <\/p><\/td><\/tr><tr><td class=\"fieldname\">sl_bt_l2cap_invalid_cid_request<\/td><td class=\"fielddescription\"><p style=\"color:inherit\">(0x2) An invalid CID is included in the command <\/p><\/td><\/tr><\/tbody><\/table><br><div>Definition at line <code>14074<\/code> of file <code>/mnt/raid/workspaces/ws.cynwT2I6w/overlay/gsdk/protocol/bluetooth/build/native/ble_host/ble_bgapi/inc/sl_bt_api.h<\/code><\/div><br><\/div><div><h3>sl_bt_l2cap_command_code_t<span id=\"sl-bt-l2cap-command-code-t\" class=\"self-anchor\"><a class=\"perm\" href=\"#sl-bt-l2cap-command-code-t\">#<\/a><\/span><\/h3><blockquote>sl_bt_l2cap_command_code_t<\/blockquote><p style=\"color:inherit\">Describes which of the request commands has been rejected. <\/p><table><tbody><tr><th colspan=\"2\">Enumerator<\/th><\/tr><tr><td class=\"fieldname\">sl_bt_l2cap_disconnection_request<\/td><td class=\"fielddescription\"><p style=\"color:inherit\">(0x6) A disconnection request <\/p><\/td><\/tr><tr><td class=\"fieldname\">sl_bt_l2cap_le_connection_request<\/td><td class=\"fielddescription\"><p style=\"color:inherit\">(0x14) An LE credit-based connection request <\/p><\/td><\/tr><tr><td class=\"fieldname\">sl_bt_l2cap_flow_control_credit<\/td><td class=\"fielddescription\"><p style=\"color:inherit\">(0x16) A Flow Control Credit packet <\/p><\/td><\/tr><\/tbody><\/table><br><div>Definition at line <code>14087<\/code> of file <code>/mnt/raid/workspaces/ws.cynwT2I6w/overlay/gsdk/protocol/bluetooth/build/native/ble_host/ble_bgapi/inc/sl_bt_api.h<\/code><\/div><br><\/div><\/div><div class=\"def-class-section\"><h2>Function Documentation<span id=\"func-definition\" class=\"self-anchor\"><a class=\"perm\" href=\"#func-definition\">#<\/a><\/span><\/h2><div><h3>sl_bt_l2cap_open_le_channel<span id=\"sl-bt-l2cap-open-le-channel\" class=\"self-anchor\"><a class=\"perm\" href=\"#sl-bt-l2cap-open-le-channel\">#<\/a><\/span><\/h3><blockquote>sl_status_t sl_bt_l2cap_open_le_channel (uint8_t connection, uint16_t spsm, uint16_t max_sdu, uint16_t max_pdu, uint16_t credit, uint16_t * cid)<\/blockquote><div class=\"parameters-section\"><strong class=\"parameters\">Parameters<\/strong><table><tbody><tr><td>[in]<\/td><td class=\"paramname\">connection<\/td><td><p style=\"color:inherit\">The connection handle <\/p><\/td><\/tr><tr><td>[in]<\/td><td class=\"paramname\">spsm<\/td><td><p style=\"color:inherit\">The protocol/services implemented by the local channel endpoint <\/p><\/td><\/tr><tr><td>[in]<\/td><td class=\"paramname\">max_sdu<\/td><td><p style=\"color:inherit\">The Maximum Service Data Unit size the local channel endpoint can accept<\/p><ul style=\"list-style:\"><li><p style=\"color:inherit\"><strong>Range:<\/strong> 23 to 65533 <\/p><\/li><\/ul><\/td><\/tr><tr><td>[in]<\/td><td class=\"paramname\">max_pdu<\/td><td><p style=\"color:inherit\">The maximum PDU payload size the local channel endpoint can accept<\/p><ul style=\"list-style:\"><li><p style=\"color:inherit\"><strong>Range:<\/strong> 23 to 252 <\/p><\/li><\/ul><\/td><\/tr><tr><td>[in]<\/td><td class=\"paramname\">credit<\/td><td><p style=\"color:inherit\">The initial credit value of the local channel endpoint, i.e., number of PDUs the peer channel endpoint can send <\/p><\/td><\/tr><tr><td>[out]<\/td><td class=\"paramname\">cid<\/td><td><p style=\"color:inherit\">The channel identifier<\/p><\/td><\/tr><\/tbody><\/table><\/div><p style=\"color:inherit\">Create and configure an L2CAP channel on a Bluetooth connection using the LE credit based connection request packet. Event <a href=\"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-evt-l2cap-le-channel-open-response\" target=\"_blank\" rel=\"\">sl_bt_evt_l2cap_le_channel_open_response<\/a> or <a href=\"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-evt-l2cap-command-rejected\" target=\"_blank\" rel=\"\">sl_bt_evt_l2cap_command_rejected<\/a> will be received after the peer device responded to the request.<\/p><p style=\"color:inherit\"><strong>Returns<\/strong><\/p><ul style=\"list-style:\"><li><p style=\"color:inherit\">SL_STATUS_OK if successful. Error code otherwise.<\/p><\/li><\/ul><p style=\"color:inherit\"><strong>Events<\/strong><\/p><ul style=\"list-style:\"><li><p style=\"color:inherit\"><a href=\"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-evt-l2cap-command-rejected\" target=\"_blank\" rel=\"\">sl_bt_evt_l2cap_command_rejected<\/a> - Triggered when the peer device rejected the connection request. Typically a legacy peer device that does not support the feature could send this response. When this event is received under the context of opening a channel using this command, the stack automatically closes the local channel and the user application should clean up the resources associated to the channel identifier.<\/p><\/li><li><p style=\"color:inherit\"><a href=\"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-evt-l2cap-le-channel-open-response\" target=\"_blank\" rel=\"\">sl_bt_evt_l2cap_le_channel_open_response<\/a> - Triggered when an LE credit-based connection response has been received in response to this command. If the result code in <code>errorcode<\/code> of the event is not equal to <a href=\"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-l2cap#sl-bt-l2cap-connection-result-successful\" target=\"_blank\" rel=\"\">sl_bt_l2cap_connection_result_successful<\/a>, it means that connection request was rejected by the peer device. In this case, the stack automatically closes the local channel and the user application should clean up the resources associated to the channel identifier.<\/p><\/li><li><p style=\"color:inherit\"><a href=\"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-evt-l2cap-channel-closed\" target=\"_blank\" rel=\"\">sl_bt_evt_l2cap_channel_closed<\/a> - Triggered when an LE credit-based connection response has not been received within 30 seconds after this command has been issued. <\/p><\/li><\/ul><br><div>Definition at line <code>14339<\/code> of file <code>/mnt/raid/workspaces/ws.cynwT2I6w/overlay/gsdk/protocol/bluetooth/build/native/ble_host/ble_bgapi/inc/sl_bt_api.h<\/code><\/div><br><\/div><div><h3>sl_bt_l2cap_send_le_channel_open_response<span id=\"sl-bt-l2cap-send-le-channel-open-response\" class=\"self-anchor\"><a class=\"perm\" href=\"#sl-bt-l2cap-send-le-channel-open-response\">#<\/a><\/span><\/h3><blockquote>sl_status_t sl_bt_l2cap_send_le_channel_open_response (uint8_t connection, uint16_t cid, uint16_t max_sdu, uint16_t max_pdu, uint16_t credit, uint16_t errorcode)<\/blockquote><div class=\"parameters-section\"><strong class=\"parameters\">Parameters<\/strong><table><tbody><tr><td>[in]<\/td><td class=\"paramname\">connection<\/td><td><p style=\"color:inherit\">The connection handle <\/p><\/td><\/tr><tr><td>[in]<\/td><td class=\"paramname\">cid<\/td><td><p style=\"color:inherit\">The channel identifier <\/p><\/td><\/tr><tr><td>[in]<\/td><td class=\"paramname\">max_sdu<\/td><td><p style=\"color:inherit\">The Maximum Service Data Unit size the local channel endpoint can accept<\/p><ul style=\"list-style:\"><li><p style=\"color:inherit\"><strong>Range:<\/strong> 23 to 65533 <\/p><\/li><\/ul><\/td><\/tr><tr><td>[in]<\/td><td class=\"paramname\">max_pdu<\/td><td><p style=\"color:inherit\">The maximum PDU payload size the local channel endpoint can accept<\/p><ul style=\"list-style:\"><li><p style=\"color:inherit\"><strong>Range:<\/strong> 23 to 252 <\/p><\/li><\/ul><\/td><\/tr><tr><td>[in]<\/td><td class=\"paramname\">credit<\/td><td><p style=\"color:inherit\">The initial credit value of the local channel endpoint, i.e., number of PDUs that the peer channel endpoint can send <\/p><\/td><\/tr><tr><td>[in]<\/td><td class=\"paramname\">errorcode<\/td><td><p style=\"color:inherit\">Enum <a href=\"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-l2cap#sl-bt-l2cap-connection-result-t\" target=\"_blank\" rel=\"\">sl_bt_l2cap_connection_result_t<\/a>. An L2CAP error code as the outcome of the connection request<\/p><\/td><\/tr><\/tbody><\/table><\/div><p style=\"color:inherit\">Send an LE credit-based connection response to an LE credit-based connection request received in the <a href=\"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-evt-l2cap-le-channel-open-request\" target=\"_blank\" rel=\"\">sl_bt_evt_l2cap_le_channel_open_request<\/a> event. Result code <a href=\"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-l2cap#sl-bt-l2cap-connection-result-successful\" target=\"_blank\" rel=\"\">sl_bt_l2cap_connection_result_successful<\/a> in <code>errorcode<\/code> implies that the logical channel is established and data can be sent or received on the channel.<\/p><p style=\"color:inherit\">To reject the connection request, use a result code other than sl_bt_l2cap_connection_result_successful in <code>errorcode<\/code>. Other parameters in this command are ignored in this case. The stack automatically closes the local channel and the user application should clean up the resources associated to the channel identifier.<\/p><p style=\"color:inherit\"><strong>Returns<\/strong><\/p><ul style=\"list-style:\"><li><p style=\"color:inherit\">SL_STATUS_OK if successful. Error code otherwise. <\/p><\/li><\/ul><br><div>Definition at line <code>14380<\/code> of file <code>/mnt/raid/workspaces/ws.cynwT2I6w/overlay/gsdk/protocol/bluetooth/build/native/ble_host/ble_bgapi/inc/sl_bt_api.h<\/code><\/div><br><\/div><div><h3>sl_bt_l2cap_channel_send_data<span id=\"sl-bt-l2cap-channel-send-data\" class=\"self-anchor\"><a class=\"perm\" href=\"#sl-bt-l2cap-channel-send-data\">#<\/a><\/span><\/h3><blockquote>sl_status_t sl_bt_l2cap_channel_send_data (uint8_t connection, uint16_t cid, size_t data_len, const uint8_t * data)<\/blockquote><div class=\"parameters-section\"><strong class=\"parameters\">Parameters<\/strong><table><tbody><tr><td>[in]<\/td><td class=\"paramname\">connection<\/td><td><p style=\"color:inherit\">The connection handle <\/p><\/td><\/tr><tr><td>[in]<\/td><td class=\"paramname\">cid<\/td><td><p style=\"color:inherit\">The channel identifier <\/p><\/td><\/tr><tr><td>[in]<\/td><td class=\"paramname\">data_len<\/td><td><p style=\"color:inherit\">Length of data in <code>data<\/code><\/p><\/td><\/tr><tr><td>[in]<\/td><td class=\"paramname\">data<\/td><td><p style=\"color:inherit\">Data to be sent. The data length must not be greater than the lesser of the peer channel endpoint max_pdu and 252 bytes, which is the maximum data length this command can send.<\/p><\/td><\/tr><\/tbody><\/table><\/div><p style=\"color:inherit\">Send data to the peer channel endpoint on a Bluetooth connection. If the SDU length is larger than max_pdu size or 250 bytes, the application should fragment the SDU into multiple K-frames and call this command once for each K-frame.<\/p><p style=\"color:inherit\">The first K-frame of the SDU should start with 2 bytes of SDU length followed with payload. Therefore, the first K-frame contains PDU length minus 2 bytes of the actual payload. All subsequent K-frames of the same SDU contain PDU length of the payload. The sum of the payload lengths for K-frames should be equal to the specified SDU length.<\/p><p style=\"color:inherit\"><strong>Returns<\/strong><\/p><ul style=\"list-style:\"><li><p style=\"color:inherit\">SL_STATUS_OK if successful. Error code otherwise. <\/p><\/li><\/ul><br><div>Definition at line <code>14410<\/code> of file <code>/mnt/raid/workspaces/ws.cynwT2I6w/overlay/gsdk/protocol/bluetooth/build/native/ble_host/ble_bgapi/inc/sl_bt_api.h<\/code><\/div><br><\/div><div><h3>sl_bt_l2cap_channel_send_credit<span id=\"sl-bt-l2cap-channel-send-credit\" class=\"self-anchor\"><a class=\"perm\" href=\"#sl-bt-l2cap-channel-send-credit\">#<\/a><\/span><\/h3><blockquote>sl_status_t sl_bt_l2cap_channel_send_credit (uint8_t connection, uint16_t cid, uint16_t credit)<\/blockquote><div class=\"parameters-section\"><strong class=\"parameters\">Parameters<\/strong><table><tbody><tr><td>[in]<\/td><td class=\"paramname\">connection<\/td><td><p style=\"color:inherit\">The connection handle <\/p><\/td><\/tr><tr><td>[in]<\/td><td class=\"paramname\">cid<\/td><td><p style=\"color:inherit\">The channel identifier <\/p><\/td><\/tr><tr><td>[in]<\/td><td class=\"paramname\">credit<\/td><td><p style=\"color:inherit\">The credit value, i.e., the additional number of PDUs the peer channel endpoint can send<\/p><ul style=\"list-style:\"><li><p style=\"color:inherit\"><strong>Range:<\/strong> 1 to 65535 <\/p><\/li><\/ul><\/td><\/tr><\/tbody><\/table><\/div><p style=\"color:inherit\">Send flow control credits to the peer channel endpoint indicating that the local channel endpoint is capable of receiving more data.<\/p><p style=\"color:inherit\"><strong>Returns<\/strong><\/p><ul style=\"list-style:\"><li><p style=\"color:inherit\">SL_STATUS_OK if successful. Error code otherwise. <\/p><\/li><\/ul><br><div>Definition at line <code>14432<\/code> of file <code>/mnt/raid/workspaces/ws.cynwT2I6w/overlay/gsdk/protocol/bluetooth/build/native/ble_host/ble_bgapi/inc/sl_bt_api.h<\/code><\/div><br><\/div><div><h3>sl_bt_l2cap_close_channel<span id=\"sl-bt-l2cap-close-channel\" class=\"self-anchor\"><a class=\"perm\" href=\"#sl-bt-l2cap-close-channel\">#<\/a><\/span><\/h3><blockquote>sl_status_t sl_bt_l2cap_close_channel (uint8_t connection, uint16_t cid)<\/blockquote><div class=\"parameters-section\"><strong class=\"parameters\">Parameters<\/strong><table><tbody><tr><td>[in]<\/td><td class=\"paramname\">connection<\/td><td><p style=\"color:inherit\">The connection handle <\/p><\/td><\/tr><tr><td>[in]<\/td><td class=\"paramname\">cid<\/td><td><p style=\"color:inherit\">The channel identifier<\/p><\/td><\/tr><\/tbody><\/table><\/div><p style=\"color:inherit\">Send a disconnect request to close a credit-based logical channel.<\/p><p style=\"color:inherit\"><strong>Returns<\/strong><\/p><ul style=\"list-style:\"><li><p style=\"color:inherit\">SL_STATUS_OK if successful. Error code otherwise.<\/p><\/li><\/ul><p style=\"color:inherit\"><strong>Events<\/strong><\/p><ul style=\"list-style:\"><li><p style=\"color:inherit\"><a href=\"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-evt-l2cap-channel-closed\" target=\"_blank\" rel=\"\">sl_bt_evt_l2cap_channel_closed<\/a> - Triggered when an credit-based logical channel is closed in response to this command. <\/p><\/li><\/ul><br><div>Definition at line <code>14450<\/code> of file <code>/mnt/raid/workspaces/ws.cynwT2I6w/overlay/gsdk/protocol/bluetooth/build/native/ble_host/ble_bgapi/inc/sl_bt_api.h<\/code><\/div><br><\/div><\/div><div class=\"def-class-section\"><h2>Macro Definition Documentation<span id=\"define-definition\" class=\"self-anchor\"><a class=\"perm\" href=\"#define-definition\">#<\/a><\/span><\/h2><div><h3>sl_bt_cmd_l2cap_open_le_channel_id<span id=\"sl-bt-cmd-l2cap-open-le-channel-id\" class=\"self-anchor\"><a class=\"perm\" href=\"#sl-bt-cmd-l2cap-open-le-channel-id\">#<\/a><\/span><\/h3><blockquote>#define sl_bt_cmd_l2cap_open_le_channel_id<\/blockquote><b>Value:<\/b><pre class=\"macroshort\">0x01430020<\/pre><br><div>Definition at line <code>13988<\/code> of file <code>/mnt/raid/workspaces/ws.cynwT2I6w/overlay/gsdk/protocol/bluetooth/build/native/ble_host/ble_bgapi/inc/sl_bt_api.h<\/code><\/div><br><\/div><div><h3>sl_bt_cmd_l2cap_send_le_channel_open_response_id<span id=\"sl-bt-cmd-l2cap-send-le-channel-open-response-id\" class=\"self-anchor\"><a class=\"perm\" href=\"#sl-bt-cmd-l2cap-send-le-channel-open-response-id\">#<\/a><\/span><\/h3><blockquote>#define sl_bt_cmd_l2cap_send_le_channel_open_response_id<\/blockquote><b>Value:<\/b><pre class=\"macroshort\">0x02430020<\/pre><br><div>Definition at line <code>13989<\/code> of file <code>/mnt/raid/workspaces/ws.cynwT2I6w/overlay/gsdk/protocol/bluetooth/build/native/ble_host/ble_bgapi/inc/sl_bt_api.h<\/code><\/div><br><\/div><div><h3>sl_bt_cmd_l2cap_channel_send_data_id<span id=\"sl-bt-cmd-l2cap-channel-send-data-id\" class=\"self-anchor\"><a class=\"perm\" href=\"#sl-bt-cmd-l2cap-channel-send-data-id\">#<\/a><\/span><\/h3><blockquote>#define sl_bt_cmd_l2cap_channel_send_data_id<\/blockquote><b>Value:<\/b><pre class=\"macroshort\">0x03430020<\/pre><br><div>Definition at line <code>13990<\/code> of file <code>/mnt/raid/workspaces/ws.cynwT2I6w/overlay/gsdk/protocol/bluetooth/build/native/ble_host/ble_bgapi/inc/sl_bt_api.h<\/code><\/div><br><\/div><div><h3>sl_bt_cmd_l2cap_channel_send_credit_id<span id=\"sl-bt-cmd-l2cap-channel-send-credit-id\" class=\"self-anchor\"><a class=\"perm\" href=\"#sl-bt-cmd-l2cap-channel-send-credit-id\">#<\/a><\/span><\/h3><blockquote>#define sl_bt_cmd_l2cap_channel_send_credit_id<\/blockquote><b>Value:<\/b><pre class=\"macroshort\">0x04430020<\/pre><br><div>Definition at line <code>13991<\/code> of file <code>/mnt/raid/workspaces/ws.cynwT2I6w/overlay/gsdk/protocol/bluetooth/build/native/ble_host/ble_bgapi/inc/sl_bt_api.h<\/code><\/div><br><\/div><div><h3>sl_bt_cmd_l2cap_close_channel_id<span id=\"sl-bt-cmd-l2cap-close-channel-id\" class=\"self-anchor\"><a class=\"perm\" href=\"#sl-bt-cmd-l2cap-close-channel-id\">#<\/a><\/span><\/h3><blockquote>#define sl_bt_cmd_l2cap_close_channel_id<\/blockquote><b>Value:<\/b><pre class=\"macroshort\">0x05430020<\/pre><br><div>Definition at line <code>13992<\/code> of file <code>/mnt/raid/workspaces/ws.cynwT2I6w/overlay/gsdk/protocol/bluetooth/build/native/ble_host/ble_bgapi/inc/sl_bt_api.h<\/code><\/div><br><\/div><div><h3>sl_bt_rsp_l2cap_open_le_channel_id<span id=\"sl-bt-rsp-l2cap-open-le-channel-id\" class=\"self-anchor\"><a class=\"perm\" href=\"#sl-bt-rsp-l2cap-open-le-channel-id\">#<\/a><\/span><\/h3><blockquote>#define sl_bt_rsp_l2cap_open_le_channel_id<\/blockquote><b>Value:<\/b><pre class=\"macroshort\">0x01430020<\/pre><br><div>Definition at line <code>13993<\/code> of file <code>/mnt/raid/workspaces/ws.cynwT2I6w/overlay/gsdk/protocol/bluetooth/build/native/ble_host/ble_bgapi/inc/sl_bt_api.h<\/code><\/div><br><\/div><div><h3>sl_bt_rsp_l2cap_send_le_channel_open_response_id<span id=\"sl-bt-rsp-l2cap-send-le-channel-open-response-id\" class=\"self-anchor\"><a class=\"perm\" href=\"#sl-bt-rsp-l2cap-send-le-channel-open-response-id\">#<\/a><\/span><\/h3><blockquote>#define sl_bt_rsp_l2cap_send_le_channel_open_response_id<\/blockquote><b>Value:<\/b><pre class=\"macroshort\">0x02430020<\/pre><br><div>Definition at line <code>13994<\/code> of file <code>/mnt/raid/workspaces/ws.cynwT2I6w/overlay/gsdk/protocol/bluetooth/build/native/ble_host/ble_bgapi/inc/sl_bt_api.h<\/code><\/div><br><\/div><div><h3>sl_bt_rsp_l2cap_channel_send_data_id<span id=\"sl-bt-rsp-l2cap-channel-send-data-id\" class=\"self-anchor\"><a class=\"perm\" href=\"#sl-bt-rsp-l2cap-channel-send-data-id\">#<\/a><\/span><\/h3><blockquote>#define sl_bt_rsp_l2cap_channel_send_data_id<\/blockquote><b>Value:<\/b><pre class=\"macroshort\">0x03430020<\/pre><br><div>Definition at line <code>13995<\/code> of file <code>/mnt/raid/workspaces/ws.cynwT2I6w/overlay/gsdk/protocol/bluetooth/build/native/ble_host/ble_bgapi/inc/sl_bt_api.h<\/code><\/div><br><\/div><div><h3>sl_bt_rsp_l2cap_channel_send_credit_id<span id=\"sl-bt-rsp-l2cap-channel-send-credit-id\" class=\"self-anchor\"><a class=\"perm\" href=\"#sl-bt-rsp-l2cap-channel-send-credit-id\">#<\/a><\/span><\/h3><blockquote>#define sl_bt_rsp_l2cap_channel_send_credit_id<\/blockquote><b>Value:<\/b><pre class=\"macroshort\">0x04430020<\/pre><br><div>Definition at line <code>13996<\/code> of file <code>/mnt/raid/workspaces/ws.cynwT2I6w/overlay/gsdk/protocol/bluetooth/build/native/ble_host/ble_bgapi/inc/sl_bt_api.h<\/code><\/div><br><\/div><div><h3>sl_bt_rsp_l2cap_close_channel_id<span id=\"sl-bt-rsp-l2cap-close-channel-id\" class=\"self-anchor\"><a class=\"perm\" href=\"#sl-bt-rsp-l2cap-close-channel-id\">#<\/a><\/span><\/h3><blockquote>#define sl_bt_rsp_l2cap_close_channel_id<\/blockquote><b>Value:<\/b><pre class=\"macroshort\">0x05430020<\/pre><br><div>Definition at line <code>13997<\/code> of file <code>/mnt/raid/workspaces/ws.cynwT2I6w/overlay/gsdk/protocol/bluetooth/build/native/ble_host/ble_bgapi/inc/sl_bt_api.h<\/code><\/div><br><\/div><\/div><\/div><\/article><footer class=\"footer-commons-msg\"><\/footer><div class=\"light_theme hidden-lg\" ub-in-page=\"634f96f53042a864e44b82f8\"><\/div><div class=\"dark_theme hidden-lg\" ub-in-page=\"6735652b86eaf07b7012c67e\"><\/div>","url":"http://docs.silabs.com/bluetooth/9.0.0/bluetooth-stack-api/sl-bt-l2cap","status":"success"}
